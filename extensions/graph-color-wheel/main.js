import{StringLoader as t,DataProvider as r}from"../../core.min.js";(()=>{var t=Object.create,r=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,h=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,w=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),E=(p,d,v)=>(v=null!=p?t(h(p)):{},((t,h,p,d)=>{if(h&&"object"==typeof h||"function"==typeof h)for(let v of a(h))!u.call(t,v)&&v!==p&&r(t,v,{get:()=>h[v],enumerable:!(d=s(h,v))||d.enumerable});return t})(p&&p.__esModule?v:r(v,"default",{value:p,enumerable:!0}),p)),q=(t,r,s)=>{if(!r.has(t))throw TypeError("Cannot "+s)},x=(t,r,s)=>(q(t,r,"read from private field"),s?s.call(t):r.get(t)),D=(t,r,s)=>{if(r.has(t))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(t):r.set(t,s)},W=(t,r,s,a)=>(q(t,r,"write to private field"),r.set(t,s),s),p=w(((t,r)=>{r.exports=function(t){var r=t[0],s=t[1]/100,a=t[2]/100;return 0===a?[0,0,0]:[r,100*(2*(s*=(a*=2)<=1?a:2-a)/(a+s)),100*((a+s)/2)]}})),d=w(((t,r)=>{r.exports=function(t){var r,s,a=t[0],h=t[1]/100,u=t[2]/100;return r=h*u,[a,100*(r=(r/=(s=(2-h)*u)<=1?s:2-s)||0),100*(s/=2)]}})),v=w(((t,r)=>{r.exports=function(t,r,s){return Math.min(Math.max(t,r),s)}})),g=w(((t,r)=>{var s=v();function y(t){var r=Math.round(s(t,0,255)).toString(16);return 1==r.length?"0"+r:r}r.exports=function(t){var r=4===t.length?y(255*t[3]):"";return"#"+y(t[0])+y(t[1])+y(t[2])+r}})),m=w(((t,r)=>{r.exports=function(t){(4===t.length||5===t.length)&&(t=function(t){for(var r="#",s=1;s<t.length;s++){var a=t.charAt(s);r+=a+a}return r}(t));var r=[parseInt(t.substring(1,3),16),parseInt(t.substring(3,5),16),parseInt(t.substring(5,7),16)];if(9===t.length){var s=parseFloat((parseInt(t.substring(7,9),16)/255).toFixed(2));r.push(s)}return r}})),b=E(p()),f=E(d());function M(t){var r=t[0],s=t[1],a=t[2],h=Math.max(r,s,a),u=h-Math.min(r,s,a),p=u&&60*(h===r?(s-a)/u%6:h===s?(a-r)/u+2:(r-s)/u+4);return[p<0?p+360:p,h&&100*u/h,100*h/255]}function k(t){var r=t[0]/60,s=t[1]/100,a=t[2]/100,h=a*s,u=a-h,p=255*(h*(1-Math.abs(r%2-1))+u)+.5|0,d=255*(h+u)+.5|0,v=255*u+.5|0,g=0|r;return 1===g?[p,d,v]:2===g?[v,d,p]:3===g?[v,p,d]:4===g?[p,v,d]:5===g?[d,v,p]:[d,p,v]}var S=E(g()),P=E(m());function T(t,r){return t?[R(t[0])?U(t[0]):r[0],R(t[1])?C(t[1]):r[1],R(t[2])?C(t[2]):r[2]]:r}function L(t){return[U(t[0]),C(t[1]),C(t[2])]}function U(t){var r=Math.round(t%360*10)/10;return r<0?r+360:r}function C(t){return t<0?0:t>100?100:(10*t+.5|0)/10}function R(t){return"number"==typeof t&&isFinite(t)}var H="undefined"!=typeof globalThis?globalThis:self,O="PointerEvent"in H?function(t,r,s){t.addEventListener("pointerdown",(function(t){0===t.button&&!1!==r(t)&&this.setPointerCapture(t.pointerId)})),t.addEventListener("pointermove",(function(t){this.hasPointerCapture(t.pointerId)&&s(t)}))}:"ontouchend"in H?function(t,r,s){var a=!1;t.addEventListener("touchstart",(function(t){1===t.touches.length&&!1!==r(t.touches[0])&&(a=!0,t.preventDefault())})),t.addEventListener("touchmove",(function(t){a&&1===t.touches.length&&(t.preventDefault(),s(t.touches[0]))}))}:function(t,r,s){var n=function(t){s(t)},i=function(){removeEventListener("mouseup",i),removeEventListener("mousemove",n)};t.addEventListener("mousedown",(function(t){0===t.button&&!1!==r(t)&&(addEventListener("mousemove",n),addEventListener("mouseup",i))}))},$={hsv:[0,100,100],hsl:[0,100,50],wheelDiameter:200,wheelThickness:20,handleDiameter:16,wheelReflectsSaturation:!0,onChange:function(){}},I=H.DOMMatrix||H.WebKitCSSMatrix||H.MSCSSMatrix,A=function(t,r){return t===r||t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]},j=function(){function e(t){var r=this;this.options=t,this.wheelDiameter=this.options.wheelDiameter||$.wheelDiameter,this.wheelThickness=this.options.wheelThickness||$.wheelThickness,this.handleDiameter=this.options.handleDiameter||$.handleDiameter,this.onChange=this.options.onChange||$.onChange,this.wheelReflectsSaturation=void 0!==this.options.wheelReflectsSaturation?this.options.wheelReflectsSaturation:$.wheelReflectsSaturation,this.rootElement=this.options.appendTo.appendChild(_("div","reinvented-color-wheel")),this.hueWheelElement=this.rootElement.appendChild(_("canvas","reinvented-color-wheel--hue-wheel")),this.hueWheelContext=this.hueWheelElement.getContext("2d"),this.hueHandleElement=this.rootElement.appendChild(_("div","reinvented-color-wheel--hue-handle")),this.svSpaceElement=this.rootElement.appendChild(_("canvas","reinvented-color-wheel--sv-space")),this.svSpaceContext=this.svSpaceElement.getContext("2d"),this.svHandleElement=this.rootElement.appendChild(_("div","reinvented-color-wheel--sv-handle")),this._redrawHueWheel=function(){r._redrawHueWheelRequested=!1;var t=r.wheelDiameter,s=t/2,a=s-r.wheelThickness/2,h=Math.PI/180,u=r.wheelReflectsSaturation?",".concat(r._hsl[1],"%,").concat(r._hsl[2],"%)"):",100%,50%)",p=r.hueWheelContext;p.clearRect(0,0,t,t),p.lineWidth=r.wheelThickness;for(var d=0;d<360;d++)p.beginPath(),p.arc(s,s,a,(d-90.7)*h,(d-89.3)*h),p.strokeStyle="hsl("+d+u,p.stroke()},this.hueWheelContext.imageSmoothingEnabled=!1,this.svSpaceContext.imageSmoothingEnabled=!1,this._hsv=T(t.hsv?t.hsv:t.hsl?e.hsl2hsv(t.hsl):t.rgb?e.rgb2hsv(t.rgb):t.hex?e.rgb2hsv(e.hex2rgb(t.hex)):void 0,$.hsv),this._hsl=L(e.hsv2hsl(this._hsv)),this._rgb=e.hsv2rgb(this._hsv),this._hex=e.rgb2hex(this._rgb);var n=function(t,s){var a=r._inverseTransform.multiply(new I("matrix(1,0,0,1,".concat(t,",").concat(s,")")));return{x:a.e,y:a.f}},i=function(t){r._inverseTransform=function(t){for(var r=[t];t=t.parentElement;)r.push(t);for(var s=new I,a=r.length-1;a>=0;a--){var h=getComputedStyle(r[a]),u=h.transform;if(u&&"none"!==u){var p=h.transformOrigin.split(" ").map(parseFloat);s=s.translate(p[0],p[1]).multiply(new I(u)).translate(-p[0],-p[1])}}return s.inverse()}(t);var s=t.getBoundingClientRect();r._center=n(s.left+s.width/2,s.top+s.height/2)},o=function(t){var s=n(t.clientX,t.clientY),a=s.x-r._center.x,h=s.y-r._center.y,u=Math.atan2(h,a);r.hsv=[180*u/Math.PI+90,r.hsv[1],r.hsv[2]]},l=function(t){var s=n(t.clientX,t.clientY),a=100/r.svSpaceElement.width,h=(s.x-r._center.x)*a+50,u=(r._center.y-s.y)*a+50;r.hsv=[r._hsv[0],h,u]},c=function(t){i(r.svSpaceElement),l(t)};O(this.hueWheelElement,(function(t){i(r.hueWheelElement);var s=n(t.clientX,t.clientY),a=s.x-r._center.x,h=s.y-r._center.y,u=r.wheelDiameter/2-r.wheelThickness;if(a*a+h*h<u*u)return!1;o(t)}),o),O(this.svSpaceElement,c,l),O(this.svHandleElement,c,l),this.redraw()}return Object.defineProperty(e.prototype,"hsv",{get:function(){return this._hsv},set:function(t){A(this._hsv,t)||this._setHSV(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hsl",{get:function(){return this._hsl},set:function(t){A(this._hsl,t)||this._setHSV(e.hsl2hsv(t))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rgb",{get:function(){return this._rgb},set:function(t){A(this._rgb,t)||this._setHSV(e.rgb2hsv(t))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hex",{get:function(){return this._hex},set:function(t){this._hex!==t&&(this.rgb=e.hex2rgb(t))},enumerable:!1,configurable:!0}),e.prototype.setHSV=function(){this.hsv=arguments},e.prototype.setHSL=function(){this.hsl=arguments},e.prototype.redraw=function(){this.hueWheelElement.width=this.hueWheelElement.height=this.wheelDiameter,this.svSpaceElement.width=this.svSpaceElement.height=(this.wheelDiameter-2*this.wheelThickness)*Math.SQRT1_2;var t=this.hueHandleElement.style,r=this.svHandleElement.style;t.width=t.height=r.width=r.height="".concat(this.handleDiameter,"px"),t.marginLeft=t.marginTop=r.marginLeft=r.marginTop="".concat(-this.handleDiameter/2,"px"),this._redrawHueWheel(),this._redrawHueHandle(),this._redrawSvSpace(),this._redrawSvHandle()},e.prototype._setHSV=function(t){var r=this._hsv,s=this._hsv=T(t,r),a=r[0]-s[0],h=r[1]-s[1]||r[2]-s[2];a&&(this._hsl=[s[0],this._hsl[1],this._hsl[2]],this._redrawHueHandle(),this._updateSvBackground()),h&&(this._hsl=L(e.hsv2hsl(s)),this._redrawSvHandle(),this.wheelReflectsSaturation&&!this._redrawHueWheelRequested&&(requestAnimationFrame(this._redrawHueWheel),this._redrawHueWheelRequested=!0)),(a||h)&&(this._rgb=e.hsv2rgb(s),this._hex=e.rgb2hex(this._rgb),this.onChange(this))},e.prototype._redrawSvSpace=function(){this._updateSvBackground();var t=this.svSpaceElement.width,r=this.svSpaceContext,s=r.createLinearGradient(0,0,t,0),a=r.createLinearGradient(0,0,0,t);s.addColorStop(0,"rgba(255,255,255,1)"),s.addColorStop(1,"rgba(255,255,255,0)"),a.addColorStop(0,"rgba(0,0,0,0)"),a.addColorStop(1,"rgba(0,0,0,1)"),r.fillStyle=s,r.fillRect(0,0,t,t),r.fillStyle=a,r.fillRect(0,0,t,t)},e.prototype._updateSvBackground=function(){this.svSpaceElement.style.backgroundColor="hsl(".concat(this._hsv[0],",100%,50%)")},e.prototype._redrawHueHandle=function(){var t=this.wheelDiameter/2,r=t-this.wheelThickness/2,s=(this._hsv[0]-90)*Math.PI/180,a=this.hueHandleElement.style;a.left="".concat(r*Math.cos(s)+t,"px"),a.top="".concat(r*Math.sin(s)+t,"px")},e.prototype._redrawSvHandle=function(){var t=this.svSpaceElement.width,r=this.svHandleElement.style,s=(this.wheelDiameter-t)/2,a=this._hsv;r.left="".concat(s+t*a[1]/100,"px"),r.top="".concat(s+t*(1-a[2]/100),"px")},e.default=e,e.defaultOptions=$,e.hsv2hsl=f.default,e.hsl2hsv=b.default,e.hsv2rgb=k,e.rgb2hsv=M,e.rgb2hex=S.default,e.hex2rgb=P.default,e}();function _(t,r){var s=document.createElement(t);return s.className=r,s}var B,V,Z=Object.freeze(["hsv","hsl","rgb","hex","wheel-diameter","wheel-thickness","handle-diameter","wheel-reflects-saturation"]),F=class extends HTMLElement{constructor(){super(),D(this,B,0),D(this,V,(()=>{W(this,B,1);try{let{colorWheel:t}=this;this.setAttribute("hsv",t.hsv),this.setAttribute("hsl",t.hsl),this.setAttribute("rgb",t.rgb),this.setAttribute("hex",t.hex)}finally{W(this,B,0)}}));let t=this.attachShadow({mode:"open"});t.appendChild(document.createElement("style")).textContent=".reinvented-color-wheel,.reinvented-color-wheel--hue-handle,.reinvented-color-wheel--hue-wheel,.reinvented-color-wheel--sv-handle,.reinvented-color-wheel--sv-space{touch-action:manipulation;touch-action:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.reinvented-color-wheel{position:relative;display:inline-block;line-height:0;border-radius:50%}.reinvented-color-wheel--hue-wheel{border-radius:50%}.reinvented-color-wheel--sv-space{position:absolute;left:0;top:0;right:0;bottom:0;margin:auto}.reinvented-color-wheel--hue-handle,.reinvented-color-wheel--sv-handle{position:absolute;box-sizing:border-box;border-radius:50%;border:2px solid #fff;box-shadow:0 0 0 1px #000 inset}.reinvented-color-wheel--hue-handle{pointer-events:none}",this.colorWheel=new j({appendTo:t,onChange:t=>{x(this,V).call(this),this.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:t}))}})}static get observedAttributes(){return Z}connectedCallback(){String(this.colorWheel.hex)!==this.getAttribute("hex")&&x(this,V).call(this)}attributeChangedCallback(t,r,s){let a=this.colorWheel;switch(t){case"hex":return void(x(this,B)||(a.hex=s));case"hsv":case"hsl":case"rgb":if(!x(this,B)){let r=s.split(",").map((t=>+t));r[0]>=0&&r[1]>=0&&r[2]>=0&&(a[t]=r)}return;case"wheel-diameter":return a.wheelDiameter=+s,void a.redraw();case"wheel-thickness":return a.wheelThickness=+s,void a.redraw();case"handle-diameter":return a.handleDiameter=+s,void a.redraw();case"wheel-reflects-saturation":return a.wheelReflectsSaturation="false"!==s,void a.redraw()}}};B=new WeakMap,V=new WeakMap,customElements.define("reinvented-color-wheel",F)})();const s={iconPath:{close:'<path d="M10.5859 12L2.79297 4.20706L4.20718 2.79285L12.0001 10.5857L19.793 2.79285L21.2072 4.20706L13.4143 12L21.2072 19.7928L19.793 21.2071L12.0001 13.4142L4.20718 21.2071L2.79297 19.7928L10.5859 12Z"></path>',random:'<path d="M10.9979 1.58018C11.6178 1.22132 12.3822 1.22132 13.0021 1.58018L20.5021 5.92229C21.1197 6.27987 21.5 6.93946 21.5 7.65314V16.3469C21.5 17.0606 21.1197 17.7202 20.5021 18.0778L13.0021 22.4199C12.3822 22.7788 11.6178 22.7788 10.9979 22.4199L3.49793 18.0778C2.88029 17.7202 2.5 17.0606 2.5 16.3469V7.65314C2.5 6.93947 2.88029 6.27987 3.49793 5.92229L10.9979 1.58018ZM4.5 7.65314V7.65792L11.0021 11.4223C11.6197 11.7799 12 12.4395 12 13.1531V20.689L19.5 16.3469V7.65314L12 3.31104L4.5 7.65314ZM6.13208 12.3C6.13206 11.7477 5.74432 11.0761 5.26604 10.7999C4.78776 10.5238 4.40004 10.7476 4.40006 11.2999C4.40008 11.8522 4.78782 12.5238 5.2661 12.7999C5.74439 13.0761 6.1321 12.8523 6.13208 12.3ZM8.72899 18.7982C9.20728 19.0743 9.59499 18.8505 9.59497 18.2982C9.59495 17.7459 9.20721 17.0743 8.72893 16.7982C8.25065 16.522 7.86293 16.7459 7.86295 17.2982C7.86297 17.8504 8.25071 18.522 8.72899 18.7982ZM5.2661 16.799C5.74439 17.0751 6.1321 16.8513 6.13208 16.299C6.13206 15.7467 5.74432 15.0751 5.26604 14.799C4.78776 14.5228 4.40004 14.7467 4.40006 15.2989C4.40008 15.8512 4.78782 16.5228 5.2661 16.799ZM8.72851 14.7995C9.20679 15.0756 9.5945 14.8518 9.59448 14.2995C9.59446 13.7472 9.20673 13.0756 8.72844 12.7995C8.25016 12.5233 7.86245 12.7471 7.86246 13.2994C7.86248 13.8517 8.25022 14.5233 8.72851 14.7995ZM14.8979 8.00001C15.3762 7.72388 15.3762 7.27619 14.8979 7.00006C14.4196 6.72394 13.6441 6.72394 13.1658 7.00006C12.6875 7.27619 12.6875 7.72388 13.1658 8.00001C13.6441 8.27614 14.4196 8.27614 14.8979 8.00001ZM10.0981 7.00006C10.5764 7.27619 10.5764 7.72388 10.0981 8.00001C9.61982 8.27614 8.84434 8.27614 8.36604 8.00001C7.88774 7.72388 7.88774 7.27619 8.36604 7.00006C8.84434 6.72394 9.61982 6.72394 10.0981 7.00006ZM15.9954 15.3495C16.5932 15.0043 17.0779 14.1649 17.0779 13.4745C17.0779 12.7842 16.5933 12.5044 15.9955 12.8496C15.3977 13.1948 14.9131 14.0342 14.913 14.7246C14.913 15.4149 15.3976 15.6947 15.9954 15.3495Z"></path>'},Icon(t){return`\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"\n      style="width: 1.5rem; height: 1.5rem;"}"\n    >\n      ${this.iconPath[t]}\n    </svg>\n    `}},a={name:"graph-color-wheel",version:"1.0.0",apiLevel:1,coreMinVersion:"1.0.0",coreMaxVersion:"1.0.x",description:"Graph color picker extension using color wheel interface",author:"potatosalad775"};class GraphColorWheel{constructor(t={}){this.config=t,this.activePopup=null,this.activeUUID=null,this.activeType=null,this.selectionList=null,this._init()}_init(){this._injectStyles(),this._updateSelectionList(),window.addEventListener("core:init-ready",this._updateSelectionList.bind(this)),window.addEventListener("core:fr-phone-added",this._replaceOldButtonWithUUID.bind(this)),window.addEventListener("core:fr-target-added",this._replaceOldButtonWithUUID.bind(this)),window.addEventListener("core:fr-unknown-inserted",this._replaceOldButtonWithUUID.bind(this)),window.addEventListener("core:fr-variant-updated",this._replaceOldButtonWithUUID.bind(this)),window.addEventListener("core:menu-switched",(t=>{"list"!==t.detail.target&&this.activePopup&&(this.activePopup.remove(),this.activePopup=null)})),t.addObserver(this._updateLanguage.bind(this))}_injectStyles(){const t=document.createElement("style");t.textContent="\n  .graph-color-wheel-popup {\n    position: absolute;\n    display: flex;\n    flex-direction: row;\n    background-color: var(--gt-color-surface-container-high);\n    border: 1px solid var(--gt-color-outline);\n    border-radius: 8px;\n    padding: 1rem;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n    z-index: 500;\n    min-width: 256px;\n    max-width: 320px;\n    gap: 1rem;\n    color: var(--gt-color-on-surface);\n  }\n\n  .graph-color-wheel-popup .color-wheel-section {\n    width: 128px;\n    height: 128px;\n\n    .close-btn {\n      position: absolute;\n      bottom: 0.4rem;\n      left: 0.4rem;\n      font-size: 1.5rem;\n      width: 1.5rem;\n      height: 1.5rem;\n      border-radius: 1.5rem;\n    }\n  }\n\n  .graph-color-wheel-popup .input-section {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .graph-color-wheel-popup .color-input-container {\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    gap: 0.5rem;\n    margin-bottom: 0.25rem;\n  }\n\n  .graph-color-wheel-popup .dash-input-container {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 0.5rem;\n  }\n\n  .graph-color-wheel-popup .gcw-input-group {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n\n    input {\n      flex: 1;\n      box-sizing: border-box;\n      width: 100%;\n    }\n\n    label {\n      height: 1.25rem;\n    }\n  }\n\n  .graph-color-wheel-popup .popup-footer {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    gap: 0.5rem;\n    height: 2rem;\n    margin-bottom: 0.3rem;\n    position: relative;\n\n    button {\n      width: 2rem;\n      height: 2rem;\n      border-radius: 0.5rem;\n      color: var(--gt-color-primary);\n    }\n\n    #gcw-random-color {\n      position: absolute;\n      top: -0.3rem;\n      left: -0.5rem;\n    }\n\n    .close-btn {\n      position: absolute;\n      top: -0.3rem;\n      right: -0.5rem;\n    }\n  }\n",document.body.appendChild(t)}_updateSelectionList(){this.selectionList||(this.selectionList=document.querySelector(".selection-list"),this.selectionList?this.selectionList.querySelectorAll(".sl-color-btn").forEach((t=>{this._replaceOldButton(t)})):console.warn("Cannot find parent for color wheel."))}_replaceOldButton(t){const r=document.createElement("button");r.className="sl-color-btn",r.style.background=t.style.background,this._attachListenerToButton(r),t.parentNode.replaceChild(r,t)}_replaceOldButtonWithUUID(t){const r=document.querySelector(`.selection-list-item[data-uuid="${t.detail.uuid}"] .sl-color-btn`);this._replaceOldButton(r)}_attachListenerToButton(t){t.dataset.colorWheelAttached||(t.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation();const r=t.target.closest("[data-uuid]");r&&(null!==this.activePopup&&this.activeUUID===r.dataset.uuid?(this.activePopup.remove(),this.activePopup=null):(this.activeUUID=r.dataset.uuid,this.activeType=r.dataset.type,this._createOrShowPopup(t.target)))})),t.dataset.colorWheelAttached=!0)}_createOrShowPopup(a){this.activePopup&&(this.activePopup.remove(),this.activePopup=null);const h=r.getFRData(this.activeUUID),u=(`${h.colors.AVG}`||"hsl(0, 0%, 0%)").match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/).splice(1,3),p=h.dash.split(" ")||[null,null];this.activePopup=document.createElement("div"),this.activePopup.className="graph-color-wheel-popup",this.activePopup.innerHTML=`\n      <div class="color-wheel-section">\n        <reinvented-color-wheel\n          hsl=${u},\n          wheel-diameter="128",\n          wheel-thickness="14",\n          handle-diameter="16",\n          wheel-reflects-saturation="true",\n        ></reinvented-color-wheel>\n      </div>\n      <div class="input-section">\n        <div class="popup-footer">\n          <button id="gcw-random-color" title="Use random color">${s.Icon("random")}</button>\n          <button class="close-btn" title="Close color picker">${s.Icon("close")}</button>\n        </div>\n        <div class="color-input-container">\n          <div class="gcw-input-group">\n            <label for="gcw-hsl-hue">\n              ${t.getString("extension.graph-color-wheel.label.hue","H")}\n            </label>\n            <input type="number" id="gcw-hsl-hue" value=${u[0]} placeholder="Hue" \n              min="0" max="360" title="Hue value input">\n          </div>\n          <div class="gcw-input-group">\n            <label for="gcw-hsl-sat">\n              ${t.getString("extension.graph-color-wheel.label.saturation","S")}\n            </label>\n            <input type="number" id="gcw-hsl-sat" value=${u[1]} placeholder="Saturation"\n              min="0" max="360" title="Saturation value input">\n          </div>\n          <div class="gcw-input-group">\n            <label for="gcw-hsl-light">\n              ${t.getString("extension.graph-color-wheel.label.lightness","L")}\n            </label>\n            <input type="number" id="gcw-hsl-light" value=${u[2]} placeholder="Lightness"\n              min="0" max="360" title="Lightness value input">\n          </div>\n        </div>\n        <div class="dash-input-container">\n          <div class="gcw-input-group">\n            <label for="gcw-tick-length">\n              ${t.getString("extension.graph-color-wheel.label.tick","Tick")}\n            </label>\n            <input type="number" id="gcw-tick-length" value="${p[0]||""}" placeholder="e.g., 6"\n              title="Tick length input">\n          </div>\n          <div class="gcw-input-group">\n            <label for="gcw-space-length">\n              ${t.getString("extension.graph-color-wheel.label.space","Space")}\n            </label>\n            <input type="number" id="gcw-space-length" value="${p[1]||""}" placeholder="e.g., 3"\n              title="Space length input">\n          </div>\n        </div>\n      </div>\n    `,document.body.appendChild(this.activePopup),this._positionPopup(a),this._addPopupEventListeners()}_positionPopup(t){const r=t.getBoundingClientRect();this.activePopup.style.position="absolute",window.innerWidth,this.activePopup.style.top=r.top+window.scrollY-170+"px",this.activePopup.style.left=r.right+window.scrollX-24+"px"}_addPopupEventListeners(){const t=this.activePopup.querySelector(".close-btn"),r=this.activePopup.querySelector("reinvented-color-wheel"),s=this.activePopup.querySelector("#gcw-hsl-hue"),a=this.activePopup.querySelector("#gcw-hsl-sat"),h=this.activePopup.querySelector("#gcw-hsl-light"),u=this.activePopup.querySelector("#gcw-tick-length"),p=this.activePopup.querySelector("#gcw-space-length"),d=this.activePopup.querySelector("#gcw-random-color");t.addEventListener("click",(()=>{this.activePopup.remove(),this.activePopup=null})),r.addEventListener("change",(t=>{s.value=t.detail.hsl[0],a.value=t.detail.hsl[1],h.value=t.detail.hsl[2],this._updateColor({h:parseInt(s.value),s:parseInt(a.value),l:parseInt(h.value)})})),s.addEventListener("input",(t=>{let s=t.target.value;r.colorWheel.hsl=[s,r.colorWheel.hsl[1],r.colorWheel.hsl[2]]})),a.addEventListener("input",(t=>{let s=t.target.value;r.colorWheel.hsl=[r.colorWheel.hsl[0],s,r.colorWheel.hsl[2]]})),h.addEventListener("input",(t=>{let s=t.target.value;r.colorWheel.hsl=[r.colorWheel.hsl[0],r.colorWheel.hsl[1],s]})),u.addEventListener("input",(()=>{this._updateDash({tick:u.value,space:p.value})})),p.addEventListener("input",(()=>{this._updateDash({tick:u.value,space:p.value})})),d.addEventListener("click",(()=>{const t=parseInt((360*Math.random()).toFixed(0)),u=parseInt((50*Math.random()).toFixed(0)),p=parseInt((20*Math.random()).toFixed(0));this.activeType.includes("target")?(s.value=t,a.value=0,h.value=45,r.colorWheel.hsl=[t,0,45]):(s.value=t,a.value=50+u,h.value=30+p,r.colorWheel.hsl=[t,50+u,30+p])}))}_updateColor({h:t,s:s,l:a}){this._updateColorTimeout&&clearTimeout(this._updateColorTimeout),this._updateColorTimeout=setTimeout((()=>{r.updateColors("uuid",this.activeUUID,{L:`hsl(${(t-10)%360}, ${s}%, ${a}%)`,R:`hsl(${(t+10)%360}, ${s}%, ${a}%)`,AVG:`hsl(${t}, ${s}%, ${a}%)`});const h=document.querySelector(`.selection-list-item[data-uuid="${this.activeUUID}"] .sl-color-btn`);h&&(h.style.background=`hsl(${t}, ${s}%, ${a}%)`),this._updateColorTimeout=null}),10)}_updateDash({tick:t,space:s}){this._updateDashTimeout&&clearTimeout(this._updateDashTimeout),this._updateDashTimeout=setTimeout((()=>{r.updateDashPattern("uuid",this.activeUUID,`${t} ${s}`),this._updateDashTimeout=null}),10)}_handleOutsideClick(t){this.activePopup&&!this.activePopup.contains(t.target)&&(t.target.closest(".sl-color-btn")||(this.activePopup.remove(),this.activePopup=null,document.removeEventListener("click",this._handleOutsideClick.bind(this),!0)))}_updateLanguage(){if(!this.activePopup)return;const r=this.activePopup.querySelector('label[for="gcw-hsl-hue"'),s=this.activePopup.querySelector('label[for="gcw-hsl-sat"'),a=this.activePopup.querySelector('label[for="gcw-hsl-light"'),h=this.activePopup.querySelector('label[for="gcw-tick-length"'),u=this.activePopup.querySelector('label[for="gcw-space-length"');r&&(r.innerHTML=t.getString("extension.graph-color-wheel.label.hue","H")),s&&(s.innerHTML=t.getString("extension.graph-color-wheel.label.saturation","S")),a&&(a.innerHTML=t.getString("extension.graph-color-wheel.label.lightness","L")),h&&(h.innerHTML=t.getString("extension.graph-color-wheel.label.tick","Tick")),u&&(u.innerHTML=t.getString("extension.graph-color-wheel.label.space","Space"))}}export{a as EXTENSION_METADATA,GraphColorWheel as default};
//# sourceMappingURL=main.js.map
